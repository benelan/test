name: Verify Install
on:
  issues:
    types: [labeled]
jobs:
  assign:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v4
        with:
          script: |
            const {
              label,
              sender,
              issue: { repo, owner, number: issue_number },
            } = context.payload;
            if (label && label.name === "3 - installed") {
              const assignees =
                sender && sender.login === "benelan"
                  ? ["jcfranco"]
                  : ["benelan"];
              github.issues.createComment({
                issue_number,
                owner,
                repo,
                body: "Installed, assigning for verification.",
              });
              await github.issues.update({
                issue_number,
                owner,
                repo,
                assignees,
              });
            }
